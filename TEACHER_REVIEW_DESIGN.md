# æ•™å¸ˆæ‰¹æ”¹æŠ¥å‘ŠåŠŸèƒ½è®¾è®¡æ–‡æ¡£

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

ä¸ºæ•™å¸ˆç«¯æ–°å¢"æ‰¹æ”¹æŠ¥å‘Š"åŠŸèƒ½ï¼Œå…è®¸æ•™å¸ˆåœ¨çº¿æŸ¥çœ‹å­¦ç”Ÿæäº¤çš„å®éªŒæŠ¥å‘Šï¼Œè¿›è¡Œæ‰¹æ³¨ã€è¯„åˆ†å’Œè¯„è¯­ã€‚

## äºŒã€éœ€æ±‚åˆ†æ

### 2.1 æ ¸å¿ƒéœ€æ±‚

1. **æ•™å¸ˆç«¯éšè—"åœ¨çº¿å®Œæˆ"åŠŸèƒ½**
   - æ•™å¸ˆä¸éœ€è¦æäº¤æŠ¥å‘Šï¼Œåªéœ€æŸ¥çœ‹å’Œæ‰¹æ”¹å­¦ç”ŸæŠ¥å‘Š
   - ä¿ç•™å­¦ç”Ÿç«¯çš„"åœ¨çº¿å®Œæˆ"åŠŸèƒ½

2. **æ‰¹æ”¹æŠ¥å‘ŠåŠŸèƒ½**
   - æŸ¥çœ‹æŸä»»åŠ¡ä¸‹æ‰€æœ‰å­¦ç”Ÿçš„æäº¤åˆ—è¡¨
   - åœ¨çº¿é¢„è§ˆ/æ‰¹æ³¨å­¦ç”Ÿæäº¤çš„æŠ¥å‘Š
   - ç»™å‡ºåˆ†æ•°å’Œè¯„è¯­
   - ä¿å­˜æ‰¹æ”¹ç»“æœ
   - æ‰¹é‡å¯¼å‡ºæˆç»©

### 2.2 ç”¨æˆ·è§’è‰²

- **æ•™å¸ˆ**ï¼šæ‰¹æ”¹æŠ¥å‘Šã€æŸ¥çœ‹ç»Ÿè®¡
- **å­¦ç”Ÿ**ï¼šæäº¤æŠ¥å‘Šã€æŸ¥çœ‹æ‰¹æ”¹ç»“æœ

## ä¸‰ã€åŠŸèƒ½è®¾è®¡

### 3.1 åŠŸèƒ½å…¥å£ä¸æ“ä½œæµç¨‹

#### å®Œæ•´æ‰¹æ”¹æµç¨‹ï¼ˆä¸‰çº§é¡µé¢ï¼‰

```
ç¬¬ä¸€çº§ï¼šä»»åŠ¡åˆ—è¡¨é¡µ
   â†“ [ç‚¹å‡»"æ‰¹æ”¹æŠ¥å‘Š"æŒ‰é’®]
ç¬¬äºŒçº§ï¼šæ‰¹æ”¹åˆ—è¡¨é¡µï¼ˆæ˜¾ç¤ºè¯¥ä»»åŠ¡ä¸‹æ‰€æœ‰å­¦ç”Ÿæäº¤ï¼‰
   â†“ [ç‚¹å‡»æŸä¸ªå­¦ç”Ÿçš„"æ‰¹æ”¹"æŒ‰é’®]
ç¬¬ä¸‰çº§ï¼šæ‰¹æ”¹è¯¦æƒ…é¡µï¼ˆOnlyOffice + æ‰¹æ”¹è¡¨å•ï¼‰
```

**æ“ä½œæµç¨‹ç¤ºä¾‹**ï¼š

```
1. æ•™å¸ˆè¿›å…¥"å®éªŒä»»åŠ¡ç®¡ç†"
   ä»»åŠ¡åˆ—è¡¨æ˜¾ç¤ºï¼š
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ PythonåŸºç¡€å®éªŒ  [æŸ¥çœ‹] [æ‰¹æ”¹æŠ¥å‘Š] [ç¼–è¾‘] â”‚
   â”‚ æ•°æ®ç»“æ„å®éªŒ    [æŸ¥çœ‹] [æ‰¹æ”¹æŠ¥å‘Š] [ç¼–è¾‘] â”‚
   â”‚ Webå¼€å‘å®éªŒ     [æŸ¥çœ‹] [æ‰¹æ”¹æŠ¥å‘Š] [ç¼–è¾‘] â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. ç‚¹å‡»"æ‰¹æ”¹æŠ¥å‘Š"æŒ‰é’® â†’ è¿›å…¥è¯¥ä»»åŠ¡çš„æ‰¹æ”¹åˆ—è¡¨é¡µ
   æ˜¾ç¤ºè¯¥ä»»åŠ¡ä¸‹æ‰€æœ‰å­¦ç”Ÿçš„æäº¤ï¼š
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ä»»åŠ¡ï¼šPythonåŸºç¡€å®éªŒ                    â”‚
   â”‚ å­¦ç”Ÿåˆ—è¡¨ï¼š                              â”‚
   â”‚   å¼ ä¸‰  2025-01-10  å¾…æ‰¹æ”¹  [æ‰¹æ”¹]     â”‚
   â”‚   æå››  2025-01-10  å¾…æ‰¹æ”¹  [æ‰¹æ”¹]     â”‚
   â”‚   ç‹äº”  2025-01-10  å·²æ‰¹æ”¹  [æŸ¥çœ‹]     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ç‚¹å‡»"æ‰¹æ”¹"æŒ‰é’® â†’ è¿›å…¥æ‰¹æ”¹è¯¦æƒ…é¡µ
   å·¦ä¾§OnlyOffice + å³ä¾§æ‰¹æ”¹è¡¨å•
```

**é¢åŒ…å±‘å¯¼èˆª**ï¼š
```
ä»»åŠ¡åˆ—è¡¨ > PythonåŸºç¡€å®éªŒ-æ‰¹æ”¹åˆ—è¡¨ > å¼ ä¸‰çš„æŠ¥å‘Š
```

#### åŠŸèƒ½å…¥å£è®¾è®¡ï¼ˆæ¨èï¼‰

**ä»»åŠ¡åˆ—è¡¨é¡µæ“ä½œæŒ‰é’®**ï¼š

```vue
<!-- å­¦ç”Ÿç«¯çœ‹åˆ° -->
<el-button v-if="!isTeacher && scope.row.status === '1'">
  åœ¨çº¿å®Œæˆ
</el-button>

<!-- æ•™å¸ˆç«¯çœ‹åˆ° -->
<el-button v-if="isTeacher">
  æ‰¹æ”¹æŠ¥å‘Š (25/30)  â† æ˜¾ç¤ºæäº¤è¿›åº¦
</el-button>
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ•™å¸ˆå…ˆé€‰æ‹©ä»»åŠ¡ï¼Œå†æ‰¹æ”¹è¯¥ä»»åŠ¡çš„æŠ¥å‘Š
- âœ… é¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ä»»åŠ¡çš„æäº¤è®°å½•
- âœ… æŒ‰ä»»åŠ¡ç»„ç»‡ï¼Œç¬¦åˆæ•™å­¦åœºæ™¯
- âœ… å¯ä»¥ä¸“æ³¨æ‰¹æ”¹ä¸€ä¸ªä»»åŠ¡çš„æ‰€æœ‰å­¦ç”Ÿ

### 3.2 é¡µé¢ç»“æ„

#### 3.2.1 æ‰¹æ”¹æŠ¥å‘Šåˆ—è¡¨é¡µï¼ˆreview-list.vueï¼‰

**é¡µé¢è·¯å¾„**ï¼š`/task/review/:taskId`

**é¡µé¢è¯´æ˜**ï¼š
- ä»ä»»åŠ¡åˆ—è¡¨ç‚¹å‡»"æ‰¹æ”¹æŠ¥å‘Š"è¿›å…¥æ­¤é¡µé¢
- æ˜¾ç¤ºé€‰ä¸­ä»»åŠ¡ä¸‹æ‰€æœ‰å­¦ç”Ÿçš„æäº¤è®°å½•
- å¯ä»¥é€ä¸ªæ‰¹æ”¹æˆ–æŸ¥çœ‹

**åŠŸèƒ½æ¸…å•**ï¼š
- âœ… æ˜¾ç¤ºä»»åŠ¡åŸºæœ¬ä¿¡æ¯ï¼ˆä»»åŠ¡åã€æˆªæ­¢æ—¶é—´ã€æäº¤ç»Ÿè®¡ï¼‰
- âœ… æ˜¾ç¤ºå­¦ç”Ÿæäº¤åˆ—è¡¨ï¼ˆå­¦å·ã€å§“åã€æäº¤æ—¶é—´ã€çŠ¶æ€ã€åˆ†æ•°ï¼‰
- âœ… ç­›é€‰åŠŸèƒ½ï¼šå…¨éƒ¨/å¾…æ‰¹æ”¹/å·²æ‰¹æ”¹/æœªæäº¤
- âœ… æœç´¢åŠŸèƒ½ï¼šæŒ‰å­¦å·æˆ–å§“åæœç´¢
- âœ… æ’åºåŠŸèƒ½ï¼šæŒ‰æäº¤æ—¶é—´ã€åˆ†æ•°æ’åº
- âœ… æ‰¹é‡æ“ä½œï¼šæ‰¹é‡å¯¼å‡ºæˆç»©
- âœ… å¿«é€Ÿæ‰¹æ”¹ï¼šç‚¹å‡»"æ‰¹æ”¹"è¿›å…¥è¯¦æƒ…é¡µ

**é¡µé¢å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¢åŒ…å±‘ï¼šä»»åŠ¡åˆ—è¡¨ > PythonåŸºç¡€å®éªŒ - æ‰¹æ”¹åˆ—è¡¨                      â”‚
â”‚ ã€è¿”å›ä»»åŠ¡åˆ—è¡¨ã€‘                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ ä»»åŠ¡ä¿¡æ¯                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ä»»åŠ¡åç§°ï¼šPythonåŸºç¡€å®éªŒæŠ¥å‘Š                                  â”‚ â”‚
â”‚ â”‚ æˆªæ­¢æ—¶é—´ï¼š2025-01-15 23:59                                   â”‚ â”‚
â”‚ â”‚ æäº¤æƒ…å†µï¼š25/30 äººå·²æäº¤ (83.3%)                              â”‚ â”‚
â”‚ â”‚ æ‰¹æ”¹è¿›åº¦ï¼š10/25 å·²æ‰¹æ”¹ (40.0%)                                â”‚ â”‚
â”‚ â”‚ å¹³å‡åˆ†ï¼š82.5 åˆ†                                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ç­›é€‰ä¸æœç´¢                                                     â”‚
â”‚ çŠ¶æ€ç­›é€‰ï¼š[å…¨éƒ¨(30)] [å¾…æ‰¹æ”¹(15)] [å·²æ‰¹æ”¹(10)] [æœªæäº¤(5)]       â”‚
â”‚ æœç´¢ï¼š[ğŸ” æœç´¢å­¦å·æˆ–å§“å...]          æ’åºï¼š[æäº¤æ—¶é—´ â–¼]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å­¦å·      å§“å    æäº¤æ—¶é—´           çŠ¶æ€     åˆ†æ•°    æ“ä½œ         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ 20210101  å¼ ä¸‰   2025-01-10 10:00  âœ…å·²æ‰¹æ”¹   85    [æŸ¥çœ‹æŠ¥å‘Š]   â”‚
â”‚ 20210102  æå››   2025-01-10 11:30  â³å¾…æ‰¹æ”¹    -    [å¼€å§‹æ‰¹æ”¹]   â”‚
â”‚ 20210103  ç‹äº”   2025-01-10 14:20  â³å¾…æ‰¹æ”¹    -    [å¼€å§‹æ‰¹æ”¹]   â”‚
â”‚ 20210104  èµµå…­   2025-01-11 09:15  â³å¾…æ‰¹æ”¹    -    [å¼€å§‹æ‰¹æ”¹]   â”‚
â”‚ 20210105  é’±ä¸ƒ   æœªæäº¤              âŒæœªæäº¤    -    -           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“¥ æ‰¹é‡å¯¼å‡ºæˆç»©] [ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡å›¾è¡¨]              ã€åˆ†é¡µ 1/3ã€‘     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’è¯´æ˜**ï¼š
1. **å¼€å§‹æ‰¹æ”¹**ï¼šç‚¹å‡»åè¿›å…¥æ‰¹æ”¹è¯¦æƒ…é¡µï¼ˆç¬¬ä¸‰çº§é¡µé¢ï¼‰
2. **æŸ¥çœ‹æŠ¥å‘Š**ï¼šå·²æ‰¹æ”¹çš„æŠ¥å‘Šï¼Œä»¥åªè¯»æ¨¡å¼æŸ¥çœ‹
3. **æœªæäº¤**ï¼šç°è‰²æ˜¾ç¤ºï¼Œæ— æ³•æ‰¹æ”¹
4. **æ‰¹é‡å¯¼å‡º**ï¼šå¯¼å‡ºè¯¥ä»»åŠ¡çš„æ‰€æœ‰æˆç»©ä¸ºExcel

#### 3.2.2 æ‰¹æ”¹è¯¦æƒ…é¡µï¼ˆreview-detail.vueï¼‰

**é¡µé¢è·¯å¾„**ï¼š`/task/review/:taskId/:submitId`

**é¡µé¢è¯´æ˜**ï¼š
- ä»æ‰¹æ”¹åˆ—è¡¨ç‚¹å‡»"å¼€å§‹æ‰¹æ”¹"è¿›å…¥æ­¤é¡µé¢
- ä¸“æ³¨äºæ‰¹æ”¹å•ä¸ªå­¦ç”Ÿçš„æŠ¥å‘Š
- æ”¯æŒå¿«é€Ÿåˆ‡æ¢åˆ°å…¶ä»–å­¦ç”Ÿ

**åŠŸèƒ½æ¸…å•**ï¼š
- âœ… OnlyOfficeåœ¨çº¿é¢„è§ˆå’Œæ‰¹æ³¨
- âœ… è¯„åˆ†å’Œè¯„è¯­è¾“å…¥
- âœ… å¿«é€Ÿåˆ‡æ¢ï¼šä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªå­¦ç”Ÿ
- âœ… ä¿å­˜å¹¶ä¸‹ä¸€ä¸ªï¼ˆæé«˜æ‰¹æ”¹æ•ˆç‡ï¼‰
- âœ… å®æ—¶ä¿å­˜è‰ç¨¿ï¼ˆé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼‰
- âœ… æ˜¾ç¤ºæ‰¹æ”¹è¿›åº¦

**é¡µé¢å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¢åŒ…å±‘ï¼šä»»åŠ¡åˆ—è¡¨ > PythonåŸºç¡€å®éªŒ > æ‰¹æ”¹åˆ—è¡¨ > å¼ ä¸‰çš„æŠ¥å‘Š          â”‚
â”‚ ã€â† è¿”å›åˆ—è¡¨ã€‘  ğŸ“ æ‰¹æ”¹æŠ¥å‘Š              [â¬… ä¸Šä¸€ä¸ª] [ä¸‹ä¸€ä¸ª â¡]    â”‚
â”‚                                          (å·²æ‰¹æ”¹ 2/25)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚  ğŸ‘¤ å­¦ç”Ÿä¿¡æ¯                         â”‚
â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                              â”‚  â”‚ å§“åï¼šå¼ ä¸‰                     â”‚  â”‚
â”‚                              â”‚  â”‚ å­¦å·ï¼š20210101                 â”‚  â”‚
â”‚                              â”‚  â”‚ ç­çº§ï¼šè®¡ç®—æœº2021çº§1ç­           â”‚  â”‚
â”‚                              â”‚  â”‚ æäº¤æ—¶é—´ï¼š2025-01-10 10:00     â”‚  â”‚
â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”‚                              â”‚  ğŸ“Š è¯„åˆ†                             â”‚
â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                              â”‚  â”‚ åˆ†æ•°ï¼ˆ0-100ï¼‰ï¼š               â”‚  â”‚
â”‚                              â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚      OnlyOffice ç¼–è¾‘å™¨        â”‚  â”‚ â”‚   [    85     ]  â”‚          â”‚  â”‚
â”‚      ï¼ˆReviewæ¨¡å¼ï¼‰            â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚                              â”‚  â”‚                               â”‚  â”‚
â”‚      - æ”¯æŒæ‰¹æ³¨               â”‚  â”‚ ğŸ’¡ è¯„åˆ†å»ºè®®ï¼š                â”‚  â”‚
â”‚      - æ”¯æŒä¿®è®¢å»ºè®®            â”‚  â”‚ ä¼˜ç§€(90-100) è‰¯å¥½(80-89)    â”‚  â”‚
â”‚      - æ˜¾ç¤ºæ•™å¸ˆæ ‡è®°            â”‚  â”‚ ä¸­ç­‰(70-79)  åŠæ ¼(60-69)    â”‚  â”‚
â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”‚                              â”‚  ğŸ“ æ•™å¸ˆè¯„è¯­                         â”‚
â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                              â”‚  â”‚                               â”‚  â”‚
â”‚                              â”‚  â”‚  å®éªŒå®Œæˆè´¨é‡è¾ƒå¥½ï¼Œä»£ç è§„èŒƒï¼Œ â”‚  â”‚
â”‚                              â”‚  â”‚  é€»è¾‘æ¸…æ™°ã€‚å»ºè®®åŠ å¼ºå¼‚å¸¸å¤„ç†ã€‚ â”‚  â”‚
â”‚                              â”‚  â”‚                               â”‚  â”‚
â”‚                              â”‚  â”‚                               â”‚  â”‚
â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚  ğŸ’¡ å¸¸ç”¨è¯„è¯­æ¨¡æ¿ï¼š                   â”‚
â”‚                              â”‚  [ä¼˜ç§€] [è‰¯å¥½] [éœ€æ”¹è¿›] [è‡ªå®šä¹‰]    â”‚
â”‚                              â”‚                                     â”‚
â”‚                              â”‚  âœ… æ“ä½œ                             â”‚
â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                              â”‚  â”‚ [ğŸ’¾ ä¿å­˜]  [â­ ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª]    â”‚  â”‚
â”‚                              â”‚  â”‚ [âŒ å–æ¶ˆ]                      â”‚  â”‚
â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”‚                              â”‚  â„¹ï¸ æç¤ºï¼š                          â”‚
â”‚                              â”‚  - Ctrl+S å¿«é€Ÿä¿å­˜                  â”‚
â”‚                              â”‚  - Ctrl+â†’ ä¸‹ä¸€ä¸ªå­¦ç”Ÿ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®åŠŸèƒ½è¯´æ˜**ï¼š

1. **OnlyOfficeæ‰¹æ³¨æ¨¡å¼**
   - æ•™å¸ˆå¯ä»¥åœ¨æ–‡æ¡£ä¸­ç›´æ¥æ·»åŠ æ‰¹æ³¨
   - æ‰¹æ³¨ä»¥ä¸åŒé¢œè‰²æ˜¾ç¤ºï¼ˆå¦‚çº¢è‰²ï¼‰
   - å­¦ç”Ÿæ‰“å¼€æ—¶å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ‰¹æ³¨

2. **å¿«é€Ÿåˆ‡æ¢**
   - ç‚¹å‡»"ä¸‹ä¸€ä¸ª"è‡ªåŠ¨è·³è½¬åˆ°åˆ—è¡¨ä¸­ä¸‹ä¸€ä¸ªå¾…æ‰¹æ”¹å­¦ç”Ÿ
   - è‡ªåŠ¨è·³è¿‡å·²æ‰¹æ”¹çš„å­¦ç”Ÿ
   - æ˜¾ç¤ºå½“å‰æ‰¹æ”¹è¿›åº¦ï¼ˆå¦‚ 2/25ï¼‰

3. **ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª**
   - ç‚¹å‡»åè‡ªåŠ¨ä¿å­˜å½“å‰æ‰¹æ”¹
   - ç«‹å³è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå¾…æ‰¹æ”¹å­¦ç”Ÿ
   - æé«˜æ‰¹æ”¹æ•ˆç‡

4. **è¯„è¯­æ¨¡æ¿**
   - é¢„è®¾å¸¸ç”¨è¯„è¯­æ¨¡æ¿
   - ç‚¹å‡»å¿«é€Ÿæ’å…¥
   - å¯è‡ªå®šä¹‰ç¼–è¾‘

### 3.3 OnlyOfficeæ‰¹æ³¨æ¨¡å¼

#### 3.3.1 æ¨¡å¼é€‰æ‹©

OnlyOfficeæ”¯æŒä»¥ä¸‹æ¨¡å¼ï¼š
- **edit**ï¼ˆç¼–è¾‘æ¨¡å¼ï¼‰ï¼šå¯ä»¥ä¿®æ”¹æ–‡æ¡£å†…å®¹
- **view**ï¼ˆæŸ¥çœ‹æ¨¡å¼ï¼‰ï¼šåªè¯»ï¼Œä¸èƒ½ä¿®æ”¹
- **review**ï¼ˆå®¡é˜…æ¨¡å¼ï¼‰ï¼šå¯ä»¥æ·»åŠ æ‰¹æ³¨ã€ä¿®è®¢ï¼Œä½†ä¸ç›´æ¥ä¿®æ”¹åŸæ–‡

**æ¨èä½¿ç”¨ `review` æ¨¡å¼**ï¼š
- æ•™å¸ˆå¯ä»¥æ·»åŠ æ‰¹æ³¨å’Œå»ºè®®
- ä¸ä¼šç›´æ¥ä¿®æ”¹å­¦ç”Ÿçš„åŸæ–‡
- æ‰¹æ³¨ä¼šä»¥ä¸åŒé¢œè‰²æ˜¾ç¤º
- å­¦ç”Ÿå¯ä»¥çœ‹åˆ°æ•™å¸ˆçš„æ‰¹æ³¨

#### 3.3.2 æ‰¹æ³¨ä¿å­˜æ–¹å¼

**æ–¹æ¡ˆä¸€ï¼šä¿å­˜æ‰¹æ³¨åˆ°æ–°æ–‡ä»¶**
- æ•™å¸ˆæ‰¹æ³¨åï¼Œç”Ÿæˆæ–°çš„æ–‡æ¡£å‰¯æœ¬
- åŸå­¦ç”Ÿæäº¤æ–‡ä»¶ä¿æŒä¸å˜
- æ‰¹æ³¨æ–‡ä»¶å•ç‹¬å­˜å‚¨

**æ–¹æ¡ˆäºŒï¼šä¿å­˜æ‰¹æ³¨åˆ°åŸæ–‡ä»¶**ï¼ˆæ¨èï¼‰
- æ‰¹æ³¨ç›´æ¥ä¿å­˜åˆ°å­¦ç”Ÿçš„æäº¤æ–‡ä»¶ä¸­
- å­¦ç”Ÿå†æ¬¡æ‰“å¼€å¯ä»¥çœ‹åˆ°æ•™å¸ˆæ‰¹æ³¨
- ç®€åŒ–æ–‡ä»¶ç®¡ç†

**æ¨èæ–¹æ¡ˆäºŒ**ï¼Œå®ç°æ›´ç®€å•ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚

### 3.4 æ•°æ®æµç¨‹

#### 3.4.1 å®Œæ•´æ‰¹æ”¹æµç¨‹ï¼ˆä¸‰çº§å¯¼èˆªï¼‰

```
ç¬¬ä¸€çº§ï¼šä»»åŠ¡åˆ—è¡¨é¡µ
â”œâ”€ æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡
â”œâ”€ æ¯ä¸ªä»»åŠ¡æ˜¾ç¤ºæäº¤è¿›åº¦ï¼ˆå¦‚ 25/30ï¼‰
â””â”€ ç‚¹å‡»"æ‰¹æ”¹æŠ¥å‘Š"
      â†“
ç¬¬äºŒçº§ï¼šæ‰¹æ”¹åˆ—è¡¨é¡µï¼ˆ/task/review/:taskIdï¼‰
â”œâ”€ URLå‚æ•°ï¼štaskIdï¼ˆä»»åŠ¡IDï¼‰
â”œâ”€ æŸ¥è¯¢è¯¥ä»»åŠ¡ä¸‹æ‰€æœ‰å­¦ç”Ÿæäº¤è®°å½•
â”œâ”€ æ˜¾ç¤ºä»»åŠ¡ä¿¡æ¯å’Œç»Ÿè®¡
â”œâ”€ ç­›é€‰ï¼šå…¨éƒ¨/å¾…æ‰¹æ”¹/å·²æ‰¹æ”¹/æœªæäº¤
â””â”€ ç‚¹å‡»"å¼€å§‹æ‰¹æ”¹"
      â†“
ç¬¬ä¸‰çº§ï¼šæ‰¹æ”¹è¯¦æƒ…é¡µï¼ˆ/task/review/:taskId/:submitIdï¼‰
â”œâ”€ URLå‚æ•°ï¼štaskIdï¼ˆä»»åŠ¡IDï¼‰+ submitIdï¼ˆæäº¤è®°å½•IDï¼‰
â”œâ”€ åŠ è½½OnlyOfficeï¼ˆreviewæ¨¡å¼ï¼‰
â”œâ”€ æ˜¾ç¤ºæ‰¹æ”¹è¡¨å•
â”œâ”€ æ•™å¸ˆæ·»åŠ æ‰¹æ³¨ã€è¯„åˆ†ã€è¯„è¯­
â””â”€ ä¿å­˜ / ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª
      â†“
è¿”å›æ‰¹æ”¹åˆ—è¡¨é¡µï¼ˆæˆ–è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå­¦ç”Ÿï¼‰
```

#### 3.4.2 è¯¦ç»†æ“ä½œæµç¨‹

**æµç¨‹1ï¼šä»ä»»åŠ¡åˆ—è¡¨åˆ°æ‰¹æ”¹åˆ—è¡¨**

```javascript
// 1. ä»»åŠ¡åˆ—è¡¨é¡µï¼ˆindex.vueï¼‰
handleReview(row) {
  this.$router.push({
    path: `/task/review/${row.taskId}`,
    query: {
      taskName: row.taskName
    }
  })
}

// 2. æ‰¹æ”¹åˆ—è¡¨é¡µåŠ è½½ï¼ˆreview-list.vueï¼‰
mounted() {
  this.taskId = this.$route.params.taskId
  this.taskName = this.$route.query.taskName
  this.loadSubmitList()  // åŠ è½½è¯¥ä»»åŠ¡çš„æäº¤åˆ—è¡¨
  this.loadTaskInfo()    // åŠ è½½ä»»åŠ¡è¯¦æƒ…
}
```

**æµç¨‹2ï¼šä»æ‰¹æ”¹åˆ—è¡¨åˆ°æ‰¹æ”¹è¯¦æƒ…**

```javascript
// æ‰¹æ”¹åˆ—è¡¨é¡µï¼ˆreview-list.vueï¼‰
handleStartReview(submitId) {
  this.$router.push({
    path: `/task/review/${this.taskId}/${submitId}`
  })
}

// æ‰¹æ”¹è¯¦æƒ…é¡µåŠ è½½ï¼ˆreview-detail.vueï¼‰
mounted() {
  this.taskId = this.$route.params.taskId
  this.submitId = this.$route.params.submitId
  this.loadSubmitDetail()   // åŠ è½½æäº¤è¯¦æƒ…
  this.loadNextPrevInfo()   // åŠ è½½ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªä¿¡æ¯
  this.initOnlyOffice()     // åˆå§‹åŒ–OnlyOffice
}
```

**æµç¨‹3ï¼šæ‰¹æ”¹ä¿å­˜æµç¨‹**

```javascript
// æ‰¹æ”¹è¯¦æƒ…é¡µï¼ˆreview-detail.vueï¼‰
async handleSave() {
  // 1. å…ˆè§¦å‘OnlyOfficeä¿å­˜ï¼ˆåŒ…å«æ‰¹æ³¨ï¼‰
  await this.saveOnlyOfficeDocument()

  // 2. ä¿å­˜æ‰¹æ”¹ä¿¡æ¯ï¼ˆåˆ†æ•°ã€è¯„è¯­ï¼‰
  const data = {
    submitId: this.submitId,
    score: this.form.score,
    teacherRemark: this.form.teacherRemark,
    status: '1'  // å·²æ‰¹é˜…
  }
  await saveReview(data)

  // 3. æç¤ºæˆåŠŸ
  this.$message.success('æ‰¹æ”¹ä¿å­˜æˆåŠŸ')
}

async handleSaveAndNext() {
  // 1. ä¿å­˜å½“å‰æ‰¹æ”¹
  await this.handleSave()

  // 2. æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå¾…æ‰¹æ”¹å­¦ç”Ÿ
  const nextSubmitId = await this.findNextUnreviewedSubmit()

  if (nextSubmitId) {
    // 3. è·³è½¬åˆ°ä¸‹ä¸€ä¸ª
    this.$router.replace({
      path: `/task/review/${this.taskId}/${nextSubmitId}`
    })
  } else {
    // 4. å…¨éƒ¨æ‰¹æ”¹å®Œæˆ
    this.$message.success('å…¨éƒ¨æ‰¹æ”¹å®Œæˆï¼')
    this.$router.push(`/task/review/${this.taskId}`)
  }
}
```

#### 3.4.3 æ•°æ®æŸ¥è¯¢é€»è¾‘

**æ‰¹æ”¹åˆ—è¡¨é¡µæ•°æ®åŠ è½½**ï¼š

```javascript
// æŸ¥è¯¢è¯¥ä»»åŠ¡ä¸‹æ‰€æœ‰æäº¤è®°å½•
async loadSubmitList() {
  const params = {
    taskId: this.taskId,
    status: this.queryParams.status,  // ç­›é€‰æ¡ä»¶
    keyword: this.queryParams.keyword // æœç´¢å…³é”®å­—
  }
  const { rows, total } = await getSubmitList(this.taskId, params)

  this.submitList = rows
  this.total = total

  // è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
  this.statistics = {
    total: total,
    submitted: rows.filter(r => r.submitTime).length,
    reviewed: rows.filter(r => r.status === '1').length,
    pending: rows.filter(r => r.status === '0').length,
    avgScore: this.calculateAvgScore(rows)
  }
}
```

**æ‰¹æ”¹è¯¦æƒ…é¡µä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªé€»è¾‘**ï¼š

```javascript
async loadNextPrevInfo() {
  // è·å–å½“å‰ä»»åŠ¡çš„æ‰€æœ‰æäº¤è®°å½•ï¼ˆä»…IDåˆ—è¡¨ï¼‰
  const { data } = await getSubmitIdList(this.taskId)

  this.submitIdList = data
  const currentIndex = data.indexOf(this.submitId)

  // æŸ¥æ‰¾ä¸Šä¸€ä¸ªï¼ˆä¼˜å…ˆæœªæ‰¹æ”¹ï¼‰
  this.prevSubmitId = this.findPrev(currentIndex)

  // æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼ˆä¼˜å…ˆæœªæ‰¹æ”¹ï¼‰
  this.nextSubmitId = this.findNext(currentIndex)

  // æ›´æ–°è¿›åº¦
  this.progress = {
    current: currentIndex + 1,
    total: data.length,
    reviewed: data.filter(id => this.isReviewed(id)).length
  }
}

findNext(currentIndex) {
  // å…ˆæŸ¥æ‰¾åé¢çš„æœªæ‰¹æ”¹
  for (let i = currentIndex + 1; i < this.submitIdList.length; i++) {
    if (!this.isReviewed(this.submitIdList[i])) {
      return this.submitIdList[i]
    }
  }
  // å¦‚æœåé¢æ²¡æœ‰æœªæ‰¹æ”¹ï¼Œè¿”å›ä¸‹ä¸€ä¸ªï¼ˆæ— è®ºæ˜¯å¦æ‰¹æ”¹ï¼‰
  if (currentIndex + 1 < this.submitIdList.length) {
    return this.submitIdList[currentIndex + 1]
  }
  return null
}
```

#### 3.4.2 å­¦ç”ŸæŸ¥çœ‹æ‰¹æ”¹ç»“æœæµç¨‹

```
1. å­¦ç”Ÿè¿›å…¥ä»»åŠ¡åˆ—è¡¨
   â†“
2. å·²æ‰¹æ”¹çš„ä»»åŠ¡æ˜¾ç¤º"æŸ¥çœ‹æ‰¹æ”¹"æŒ‰é’®
   â†“
3. ç‚¹å‡»åè¿›å…¥æŸ¥çœ‹é¡µé¢
   - OnlyOfficeä»¥åªè¯»æ¨¡å¼æ‰“å¼€
   - å¯ä»¥çœ‹åˆ°æ•™å¸ˆçš„æ‰¹æ³¨
   - æ˜¾ç¤ºåˆ†æ•°å’Œè¯„è¯­
```

## å››ã€æŠ€æœ¯å®ç°

### 4.1 å‰ç«¯å®ç°

#### 4.1.1 æ–°å¢é¡µé¢æ–‡ä»¶

```
ruoyi-ui/src/views/task/
â”œâ”€â”€ index.vue              # ä»»åŠ¡åˆ—è¡¨ï¼ˆå·²æœ‰ï¼Œéœ€ä¿®æ”¹ï¼‰
â”œâ”€â”€ edit.vue               # å­¦ç”Ÿåœ¨çº¿å®Œæˆï¼ˆå·²æœ‰ï¼‰
â”œâ”€â”€ review-list.vue        # æ‰¹æ”¹åˆ—è¡¨ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ review-detail.vue      # æ‰¹æ”¹è¯¦æƒ…ï¼ˆæ–°å¢ï¼‰
```

#### 4.1.2 è·¯ç”±é…ç½®

```javascript
// router/index.js
{
  path: '/task',
  component: Layout,
  children: [
    {
      path: 'index',
      component: () => import('@/views/task/index'),
      name: 'TaskIndex',
      meta: { title: 'å®éªŒä»»åŠ¡' }
    },
    {
      path: 'edit',
      component: () => import('@/views/task/edit'),
      name: 'TaskEdit',
      meta: { title: 'åœ¨çº¿å®Œæˆ' }
    },
    {
      path: 'review/:taskId',
      component: () => import('@/views/task/review-list'),
      name: 'ReviewList',
      meta: { title: 'æ‰¹æ”¹æŠ¥å‘Š' }
    },
    {
      path: 'review/:taskId/:submitId',
      component: () => import('@/views/task/review-detail'),
      name: 'ReviewDetail',
      meta: { title: 'æ‰¹æ”¹è¯¦æƒ…' }
    }
  ]
}
```

#### 4.1.3 APIæ¥å£

```javascript
// api/task/review.js
import request from '@/utils/request'

// è·å–ä»»åŠ¡çš„æäº¤åˆ—è¡¨
export function getSubmitList(taskId, params) {
  return request({
    url: `/Task/submit/list/${taskId}`,
    method: 'get',
    params
  })
}

// è·å–æ‰¹æ”¹è¯¦æƒ…
export function getReviewDetail(submitId) {
  return request({
    url: `/Task/submit/${submitId}`,
    method: 'get'
  })
}

// ä¿å­˜æ‰¹æ”¹ç»“æœ
export function saveReview(data) {
  return request({
    url: '/Task/submit/review',
    method: 'post',
    data
  })
}

// æ‰¹é‡å¯¼å‡ºæˆç»©
export function exportGrades(taskId) {
  return request({
    url: `/Task/submit/export/${taskId}`,
    method: 'get',
    responseType: 'blob'
  })
}
```

#### 4.1.4 æƒé™æ§åˆ¶

ä¿®æ”¹ `index.vue`ï¼Œæ•™å¸ˆç«¯éšè—"åœ¨çº¿å®Œæˆ"æŒ‰é’®ï¼š

```vue
<el-button
  v-if="scope.row.status === '1' && !isTeacher"
  size="mini"
  type="text"
  icon="el-icon-edit-outline"
  @click="handleOnlineComplete(scope.row)"
>åœ¨çº¿å®Œæˆ</el-button>

<el-button
  v-if="isTeacher"
  size="mini"
  type="text"
  icon="el-icon-s-order"
  @click="handleReview(scope.row)"
  v-hasPermi="['task:task:review']"
>æ‰¹æ”¹æŠ¥å‘Š</el-button>
```

```javascript
computed: {
  isTeacher() {
    // æ£€æŸ¥æ˜¯å¦æœ‰æ–°å¢ä»»åŠ¡æƒé™ï¼Œå¦‚æœæœ‰åˆ™è¯´æ˜æ˜¯æ•™å¸ˆ
    return this.checkPermi(['task:task:add'])
  }
}
```

### 4.2 åç«¯å®ç°

#### 4.2.1 æ–°å¢Controlleræ–¹æ³•

åœ¨ `ExpTaskController.java` ä¸­æ–°å¢ï¼š

```java
/**
 * è·å–ä»»åŠ¡çš„æäº¤åˆ—è¡¨ï¼ˆæ•™å¸ˆæ‰¹æ”¹ç”¨ï¼‰
 */
@PreAuthorize("@ss.hasPermi('task:task:review')")
@GetMapping("/submit/list/{taskId}")
public TableDataInfo getSubmitList(@PathVariable Long taskId, ExpTaskSubmit expTaskSubmit)
{
    startPage();
    expTaskSubmit.setTaskId(taskId);
    List<ExpTaskSubmit> list = expTaskSubmitService.selectExpTaskSubmitList(expTaskSubmit);
    return getDataTable(list);
}

/**
 * è·å–æ‰¹æ”¹è¯¦æƒ…
 */
@PreAuthorize("@ss.hasPermi('task:task:review')")
@GetMapping("/submit/{submitId}")
public AjaxResult getSubmitDetail(@PathVariable Long submitId)
{
    ExpTaskSubmit submit = expTaskSubmitService.selectExpTaskSubmitBySubmitId(submitId);
    return success(submit);
}

/**
 * ä¿å­˜æ‰¹æ”¹ç»“æœ
 */
@PreAuthorize("@ss.hasPermi('task:task:review')")
@Log(title = "æ‰¹æ”¹æŠ¥å‘Š", businessType = BusinessType.UPDATE)
@PostMapping("/submit/review")
public AjaxResult saveReview(@RequestBody ExpTaskSubmit expTaskSubmit)
{
    try
    {
        // è·å–å½“å‰ç™»å½•æ•™å¸ˆä¿¡æ¯
        LoginUser loginUser = getLoginUser();

        // æ›´æ–°æ‰¹æ”¹ä¿¡æ¯
        expTaskSubmit.setStatus("1"); // å·²æ‰¹é˜…
        expTaskSubmit.setUpdateBy(getUsername());
        expTaskSubmit.setUpdateTime(new Date());

        int result = expTaskSubmitService.updateExpTaskSubmit(expTaskSubmit);

        if (result > 0)
        {
            logger.info("æ‰¹æ”¹æˆåŠŸ, submitId: {}, score: {}",
                expTaskSubmit.getSubmitId(), expTaskSubmit.getScore());
            return success("æ‰¹æ”¹æˆåŠŸ");
        }
        else
        {
            return error("æ‰¹æ”¹å¤±è´¥");
        }
    }
    catch (Exception e)
    {
        logger.error("æ‰¹æ”¹å¤±è´¥", e);
        return error("æ‰¹æ”¹å¤±è´¥ï¼š" + e.getMessage());
    }
}

/**
 * æ‰¹é‡å¯¼å‡ºæˆç»©
 */
@PreAuthorize("@ss.hasPermi('task:task:review')")
@Log(title = "å¯¼å‡ºæˆç»©", businessType = BusinessType.EXPORT)
@GetMapping("/submit/export/{taskId}")
public void exportGrades(@PathVariable Long taskId, HttpServletResponse response)
{
    try
    {
        ExpTask task = expTaskService.selectExpTaskByTaskId(taskId);
        ExpTaskSubmit querySubmit = new ExpTaskSubmit();
        querySubmit.setTaskId(taskId);
        List<ExpTaskSubmit> list = expTaskSubmitService.selectExpTaskSubmitList(querySubmit);

        ExcelUtil<ExpTaskSubmit> util = new ExcelUtil<>(ExpTaskSubmit.class);
        util.exportExcel(response, list, task.getTaskName() + "-æˆç»©å•");
    }
    catch (Exception e)
    {
        logger.error("å¯¼å‡ºæˆç»©å¤±è´¥", e);
    }
}
```

#### 4.2.2 Serviceå±‚æ–¹æ³•

ç¡®ä¿ `IExpTaskSubmitService.java` ä¸­æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š

```java
/**
 * æŸ¥è¯¢å­¦ç”Ÿæäº¤è®°å½•åˆ—è¡¨
 */
List<ExpTaskSubmit> selectExpTaskSubmitList(ExpTaskSubmit expTaskSubmit);

/**
 * æŸ¥è¯¢å­¦ç”Ÿæäº¤è®°å½•è¯¦æƒ…
 */
ExpTaskSubmit selectExpTaskSubmitBySubmitId(Long submitId);

/**
 * æ›´æ–°å­¦ç”Ÿæäº¤è®°å½•
 */
int updateExpTaskSubmit(ExpTaskSubmit expTaskSubmit);
```

#### 4.2.3 OnlyOfficeé…ç½®è°ƒæ•´

ä¿®æ”¹ `ConfigService.java` çš„ `createConfig` æ–¹æ³•ï¼Œæ”¯æŒ `review` æ¨¡å¼ï¼š

```java
// åœ¨åˆ›å»ºConfigæ—¶ï¼Œæ ¹æ®modeå‚æ•°è®¾ç½®ä¸åŒçš„æƒé™
if (mode == Mode.REVIEW) {
    // å®¡é˜…æ¨¡å¼ï¼šå…è®¸æ‰¹æ³¨ï¼Œä½†ä¸å…è®¸ç›´æ¥ç¼–è¾‘
    config.getEditorConfig().setMode(Mode.EDIT); // åŸºç¡€æ¨¡å¼ä»ä¸ºedit

    // è®¾ç½®æƒé™
    Permissions permissions = new Permissions();
    permissions.setComment(true);        // å…è®¸è¯„è®º
    permissions.setEdit(true);           // å…è®¸ç¼–è¾‘ï¼ˆç”¨äºæ‰¹æ³¨ï¼‰
    permissions.setReview(true);         // å…è®¸å®¡é˜…
    permissions.setDownload(true);       // å…è®¸ä¸‹è½½
    permissions.setPrint(true);          // å…è®¸æ‰“å°

    config.getDocument().setPermissions(permissions);
}
```

### 4.3 æ•°æ®åº“ç›¸å…³

ç°æœ‰çš„ `exp_task_submit` è¡¨å·²åŒ…å«æ‰€éœ€å­—æ®µï¼Œæ— éœ€ä¿®æ”¹ï¼š

```sql
-- å·²æœ‰å­—æ®µ
submit_id          -- æäº¤è®°å½•ID
task_id            -- ä»»åŠ¡ID
user_id            -- å­¦ç”ŸID
user_name          -- å­¦ç”Ÿå§“å
file_url           -- æäº¤çš„æ–‡ä»¶URL
document_key       -- OnlyOfficeæ–‡æ¡£key
submit_pending     -- æ˜¯å¦æ­£åœ¨æäº¤ä¸­
submit_time        -- æäº¤æ—¶é—´
status             -- çŠ¶æ€ï¼ˆ0å¾…æ‰¹é˜… 1å·²æ‰¹é˜…ï¼‰
score              -- åˆ†æ•°
teacher_remark     -- æ•™å¸ˆè¯„è¯­
create_by          -- åˆ›å»ºè€…
create_time        -- åˆ›å»ºæ—¶é—´
update_by          -- æ›´æ–°è€…ï¼ˆæ‰¹æ”¹æ•™å¸ˆï¼‰
update_time        -- æ›´æ–°æ—¶é—´ï¼ˆæ‰¹æ”¹æ—¶é—´ï¼‰
remark             -- å¤‡æ³¨
```

### 4.4 æƒé™é…ç½®

åœ¨èœå•ç®¡ç†ä¸­æ–°å¢æƒé™ï¼š

```
æƒé™æ ‡è¯†ï¼štask:task:review
æƒé™åç§°ï¼šæ‰¹æ”¹æŠ¥å‘Š
çˆ¶çº§èœå•ï¼šå®éªŒä»»åŠ¡ç®¡ç†
```

å°†è¯¥æƒé™åˆ†é…ç»™æ•™å¸ˆè§’è‰²ã€‚

## äº”ã€å®ç°æ­¥éª¤

### 5.1 Phase 1ï¼šåŸºç¡€åŠŸèƒ½ï¼ˆ1-2å¤©ï¼‰

1. âœ… éšè—æ•™å¸ˆç«¯"åœ¨çº¿å®Œæˆ"æŒ‰é’®
2. âœ… æ–°å¢"æ‰¹æ”¹æŠ¥å‘Š"å…¥å£
3. âœ… å®ç°æ‰¹æ”¹åˆ—è¡¨é¡µ
   - æŸ¥è¯¢æäº¤è®°å½•
   - æ˜¾ç¤ºç­›é€‰å’Œç»Ÿè®¡
4. âœ… åç«¯æ¥å£å¼€å‘
   - æäº¤åˆ—è¡¨æ¥å£
   - æ‰¹æ”¹è¯¦æƒ…æ¥å£
   - ä¿å­˜æ‰¹æ”¹æ¥å£

### 5.2 Phase 2ï¼šæ‰¹æ”¹è¯¦æƒ…é¡µï¼ˆ2-3å¤©ï¼‰

1. âœ… å®ç°æ‰¹æ”¹è¯¦æƒ…é¡µå¸ƒå±€
   - å·¦ä¾§OnlyOfficeåŒºåŸŸ
   - å³ä¾§æ‰¹æ”¹è¡¨å•
2. âœ… OnlyOfficeé›†æˆ
   - é…ç½®reviewæ¨¡å¼
   - æ‰¹æ³¨åŠŸèƒ½æµ‹è¯•
3. âœ… æ‰¹æ”¹è¡¨å•å®ç°
   - åˆ†æ•°è¾“å…¥éªŒè¯
   - è¯„è¯­è¾“å…¥
   - ä¿å­˜é€»è¾‘

### 5.3 Phase 3ï¼šä¼˜åŒ–åŠŸèƒ½ï¼ˆ1-2å¤©ï¼‰

1. âœ… ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªåˆ‡æ¢
2. âœ… ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª
3. âœ… æ‰¹é‡å¯¼å‡ºæˆç»©
4. âœ… å­¦ç”ŸæŸ¥çœ‹æ‰¹æ”¹ç»“æœ

### 5.4 Phase 4ï¼šæµ‹è¯•ä¼˜åŒ–ï¼ˆ1å¤©ï¼‰

1. âœ… åŠŸèƒ½æµ‹è¯•
2. âœ… æƒé™æµ‹è¯•
3. âœ… UIä¼˜åŒ–
4. âœ… æ€§èƒ½ä¼˜åŒ–

**æ€»è®¡ï¼š5-8å¤©**

## å…­ã€å…³é”®æŠ€æœ¯ç‚¹

### 6.1 OnlyOffice Reviewæ¨¡å¼é…ç½®

```javascript
// æ‰¹æ”¹è¯¦æƒ…é¡µOnlyOfficeé…ç½®
{
  document: {
    fileType: "docx",
    key: documentKey,
    title: "å¼ ä¸‰çš„å®éªŒæŠ¥å‘Š",
    url: fileUrl,
    permissions: {
      comment: true,      // å…è®¸è¯„è®º
      edit: true,         // å…è®¸ç¼–è¾‘ï¼ˆç”¨äºæ‰¹æ³¨ï¼‰
      review: true,       // å…è®¸å®¡é˜…
      download: true,     // å…è®¸ä¸‹è½½
      print: true         // å…è®¸æ‰“å°
    }
  },
  editorConfig: {
    mode: "edit",         // ç¼–è¾‘æ¨¡å¼
    user: {
      id: teacherId,
      name: teacherName
    },
    customization: {
      reviewDisplay: "markup",  // æ‰¹æ³¨æ˜¾ç¤ºæ–¹å¼
      trackChanges: true,       // å¯ç”¨ä¿®è®¢è·Ÿè¸ª
      comments: true            // æ˜¾ç¤ºè¯„è®º
    }
  }
}
```

### 6.2 æ‰¹æ”¹çŠ¶æ€æµè½¬

```
å­¦ç”Ÿæäº¤ â†’ status='0'ï¼ˆå¾…æ‰¹é˜…ï¼‰
        â†“
æ•™å¸ˆæ‰¹æ”¹ â†’ status='1'ï¼ˆå·²æ‰¹é˜…ï¼‰+ score + teacherRemark
```

### 6.3 æ–‡ä»¶ç‰ˆæœ¬ç®¡ç†

- å­¦ç”Ÿæäº¤æ—¶ï¼šç”Ÿæˆ `documentKey`ï¼ˆåŸºäºtaskIdå’ŒuserIdï¼‰
- æ•™å¸ˆæ‰¹æ”¹æ—¶ï¼šä½¿ç”¨ç›¸åŒçš„ `documentKey`
- æ‰¹æ³¨ä¿å­˜åˆ°åŸæ–‡ä»¶ï¼Œå­¦ç”Ÿå†æ¬¡æ‰“å¼€å¯è§

## ä¸ƒã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 7.1 æ‰¹æ”¹æ•ˆç‡ä¼˜åŒ–

1. **å¿«æ·é”®æ”¯æŒ**
   - `Ctrl + S`ï¼šä¿å­˜
   - `Ctrl + â†’`ï¼šä¸‹ä¸€ä¸ª
   - `Ctrl + â†`ï¼šä¸Šä¸€ä¸ª

2. **è‡ªåŠ¨ä¿å­˜**
   - åˆ†æ•°å’Œè¯„è¯­è¾“å…¥åè‡ªåŠ¨ä¿å­˜åˆ°è‰ç¨¿
   - é˜²æ­¢è¯¯æ“ä½œä¸¢å¤±æ•°æ®

3. **æ‰¹æ”¹è¿›åº¦æç¤º**
   - é¡¶éƒ¨æ˜¾ç¤ºï¼š"å·²æ‰¹æ”¹ 10/30"
   - å®Œæˆåè‡ªåŠ¨æç¤º

### 7.2 æ•°æ®ç»Ÿè®¡

åœ¨æ‰¹æ”¹åˆ—è¡¨é¡µæ˜¾ç¤ºï¼š
- æ€»æäº¤äººæ•°
- å·²æ‰¹æ”¹äººæ•°
- å¹³å‡åˆ†
- æœ€é«˜åˆ†/æœ€ä½åˆ†

### 7.3 æ¶ˆæ¯é€šçŸ¥

æ‰¹æ”¹å®Œæˆåï¼š
- å‘é€ç³»ç»Ÿæ¶ˆæ¯é€šçŸ¥å­¦ç”Ÿ
- å­¦ç”Ÿå¯ä»¥æŸ¥çœ‹æ‰¹æ”¹ç»“æœ

## å…«ã€å®‰å…¨æ€§è€ƒè™‘

### 8.1 æƒé™æ§åˆ¶

- æ•™å¸ˆåªèƒ½æ‰¹æ”¹è‡ªå·±å‘å¸ƒä»»åŠ¡çš„æŠ¥å‘Š
- å­¦ç”Ÿåªèƒ½æŸ¥çœ‹è‡ªå·±çš„æ‰¹æ”¹ç»“æœ
- ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ‰¹æ”¹è®°å½•

### 8.2 æ•°æ®ä¿æŠ¤

- æ‰¹æ”¹æ“ä½œè®°å½•æ—¥å¿—ï¼ˆupdate_by, update_timeï¼‰
- é˜²æ­¢é‡å¤æ‰¹æ”¹å¯¼è‡´æ•°æ®è¦†ç›–
- æ‰¹æ”¹å‰æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

## ä¹ã€åç»­æ‰©å±•

### 9.1 è¯„åˆ†æ¨¡æ¿

- é¢„è®¾å¸¸ç”¨è¯„è¯­æ¨¡æ¿
- å¿«é€Ÿæ’å…¥è¯„è¯­

### 9.2 æ‰¹æ”¹ç»Ÿè®¡å›¾è¡¨

- æˆç»©åˆ†å¸ƒå›¾
- æäº¤æ—¶é—´è¶‹åŠ¿å›¾
- ç­çº§å¯¹æ¯”åˆ†æ

### 9.3 AIè¾…åŠ©æ‰¹æ”¹

- è‡ªåŠ¨æ£€æµ‹æŠ„è¢­
- æ ¼å¼è§„èŒƒæ£€æŸ¥
- å†…å®¹è´¨é‡è¯„ä¼°

## åã€æµ‹è¯•ç”¨ä¾‹

### 10.1 æ•™å¸ˆç«¯æµ‹è¯•

| æµ‹è¯•åœºæ™¯ | æ“ä½œæ­¥éª¤ | é¢„æœŸç»“æœ |
|---------|---------|---------|
| æŸ¥çœ‹æ‰¹æ”¹åˆ—è¡¨ | ç‚¹å‡»"æ‰¹æ”¹æŠ¥å‘Š" | æ˜¾ç¤ºå­¦ç”Ÿæäº¤åˆ—è¡¨ |
| æ‰¹æ”¹æŠ¥å‘Š | è¾“å…¥åˆ†æ•°å’Œè¯„è¯­ï¼Œç‚¹å‡»ä¿å­˜ | ä¿å­˜æˆåŠŸï¼ŒçŠ¶æ€æ›´æ–° |
| æ‰¹æ³¨æ–‡æ¡£ | åœ¨æ–‡æ¡£ä¸­æ·»åŠ æ‰¹æ³¨ | æ‰¹æ³¨ä¿å­˜æˆåŠŸ |
| ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª | ç‚¹å‡»"ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª" | ä¿å­˜å½“å‰ï¼Œè·³è½¬ä¸‹ä¸€ä¸ª |
| å¯¼å‡ºæˆç»© | ç‚¹å‡»"æ‰¹é‡å¯¼å‡ºæˆç»©" | ä¸‹è½½Excelæ–‡ä»¶ |

### 10.2 å­¦ç”Ÿç«¯æµ‹è¯•

| æµ‹è¯•åœºæ™¯ | æ“ä½œæ­¥éª¤ | é¢„æœŸç»“æœ |
|---------|---------|---------|
| æŸ¥çœ‹æ‰¹æ”¹ç»“æœ | æ‰“å¼€å·²æ‰¹æ”¹çš„æŠ¥å‘Š | æ˜¾ç¤ºåˆ†æ•°ã€è¯„è¯­å’Œæ‰¹æ³¨ |
| æŸ¥çœ‹æ‰¹æ³¨ | åœ¨æ–‡æ¡£ä¸­æŸ¥çœ‹æ•™å¸ˆæ‰¹æ³¨ | æ‰¹æ³¨æ­£ç¡®æ˜¾ç¤º |

### 10.3 æƒé™æµ‹è¯•

| æµ‹è¯•åœºæ™¯ | æ“ä½œæ­¥éª¤ | é¢„æœŸç»“æœ |
|---------|---------|---------|
| æ•™å¸ˆæŸ¥çœ‹å…¶ä»–æ•™å¸ˆçš„ä»»åŠ¡ | å°è¯•æ‰¹æ”¹ | æ— æƒé™æˆ–çœ‹ä¸åˆ° |
| å­¦ç”ŸæŸ¥çœ‹å…¶ä»–å­¦ç”Ÿçš„æŠ¥å‘Š | å°è¯•è®¿é—® | æ— æƒé™ |

## åä¸€ã€æ³¨æ„äº‹é¡¹

1. **OnlyOfficeç‰ˆæœ¬å…¼å®¹æ€§**
   - ç¡®ä¿OnlyOfficeæ”¯æŒreviewæ¨¡å¼
   - æµ‹è¯•æ‰¹æ³¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸

2. **æ€§èƒ½ä¼˜åŒ–**
   - å¤§æ–‡ä»¶åŠ è½½ä¼˜åŒ–
   - æ‰¹é‡æ“ä½œä¼˜åŒ–

3. **æµè§ˆå™¨å…¼å®¹æ€§**
   - æµ‹è¯•ä¸»æµæµè§ˆå™¨
   - ç§»åŠ¨ç«¯é€‚é…ï¼ˆå¯é€‰ï¼‰

4. **æ–‡ä»¶å­˜å‚¨**
   - MinIOå­˜å‚¨ç©ºé—´ç›‘æ§
   - å®šæœŸæ¸…ç†è¿‡æœŸæ–‡ä»¶

## åäºŒã€æ€»ç»“

æœ¬è®¾è®¡æ–¹æ¡ˆæä¾›äº†å®Œæ•´çš„æ•™å¸ˆæ‰¹æ”¹æŠ¥å‘ŠåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

âœ… **æ ¸å¿ƒåŠŸèƒ½**ï¼šæ‰¹æ”¹åˆ—è¡¨ã€æ‰¹æ”¹è¯¦æƒ…ã€è¯„åˆ†è¯„è¯­
âœ… **æŠ€æœ¯å®ç°**ï¼šOnlyOffice reviewæ¨¡å¼ã€å‰åç«¯æ¥å£
âœ… **ç”¨æˆ·ä½“éªŒ**ï¼šå¿«æ·æ“ä½œã€è¿›åº¦æç¤ºã€ç»Ÿè®¡åˆ†æ
âœ… **æ‰©å±•æ€§**ï¼šé¢„ç•™AIè¾…åŠ©æ‰¹æ”¹ç­‰æ‰©å±•åŠŸèƒ½

**å®æ–½å‘¨æœŸ**ï¼š5-8ä¸ªå·¥ä½œæ—¥
**æŠ€æœ¯éš¾åº¦**ï¼šä¸­ç­‰
**ä¸šåŠ¡ä»·å€¼**ï¼šé«˜ï¼ˆå®Œå–„æ•™å­¦é—­ç¯ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**åˆ›å»ºæ—¥æœŸ**ï¼š2025-12-30
**ä½œè€…**ï¼šClaude Code
